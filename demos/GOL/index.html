<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game of Life — Hector O'Franco</title>
    <link rel="icon" href="../img/logo.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        :root {
            --bg: #0a1120;
            --border: rgba(148, 163, 184, 0.12);
            --primary: #26a641;
            --text: #f1f5f9;
            --muted: #64748b;
        }

        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Inter', -apple-system, sans-serif;
            overflow-x: hidden;
        }

        #bg-canvas {
            position: fixed; inset: 0;
            z-index: 0; opacity: 0.18; pointer-events: none;
        }

        header {
            position: relative; z-index: 10;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 20px;
            background: rgba(10, 17, 32, 0.95);
            border-bottom: 1px solid var(--border);
            backdrop-filter: blur(20px);
        }

        .header-brand { display: flex; align-items: center; gap: 10px; }

        .header-logo {
            width: 32px; height: 32px;
            background: linear-gradient(135deg, #26a641, #39d353);
            border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 0.75rem; color: white;
            text-decoration: none;
        }

        .header-title { font-size: 0.95rem; font-weight: 600; }
        .header-meta  { font-size: 0.7rem; color: var(--muted); }

        .back-link {
            display: inline-flex; align-items: center; gap: 6px;
            color: var(--muted); font-size: 0.78rem; text-decoration: none;
            padding: 5px 10px; border: 1px solid var(--border); border-radius: 8px;
            transition: all .2s;
        }
        .back-link:hover { color: #39d353; border-color: var(--primary); }

        .badge {
            display: inline-flex; align-items: center; gap: 5px;
            font-size: 0.7rem; font-weight: 600;
            padding: 0.2rem 0.6rem; border-radius: 50px;
            background: rgba(168,85,247,0.15); color: #c084fc;
            border: 1px solid rgba(168,85,247,0.3);
        }

        main {
            position: relative; z-index: 1;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1.5rem 1rem;
            gap: 1rem;
        }

        .game-controls {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        #gameCanvas {
            border: 1px solid rgba(38,166,65,0.3);
            border-radius: 4px;
            background: #0a1120;
            max-width: 100%;
        }

        footer {
            position: relative; z-index: 1;
            background: rgba(8,14,26,0.88);
            border-top: 1px solid var(--border);
            padding: 1rem 2rem;
            text-align: center;
            font-size: 0.8rem;
            color: var(--muted);
        }
        footer a { color: var(--muted); text-decoration: none; }
        footer a:hover { color: var(--text); }
    </style>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M3TV3Z6VV7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date()); gtag('config', 'G-M3TV3Z6VV7');
</script>
<body>
<canvas id="bg-canvas"></canvas>

<header>
    <div class="header-brand">
        <a class="header-logo" href="../index.html" title="Home">HF</a>
        <div>
            <div class="header-title">Conway's Game of Life</div>
            <div class="header-meta">200×200 grid · 1s/generation · v2026</div>
        </div>
    </div>
    <div style="display:flex;gap:.6rem;align-items:center;">
        <span class="badge">2024</span>
        <a class="back-link" href="../index.html">
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="15 18 9 12 15 6"/></svg>
            Home
        </a>
    </div>
</header>

<main>
    <canvas id="gameCanvas"></canvas>
</main>

<footer>
    <p>&copy; 2024–2026 <a href="../index.html">Hector O'Franco</a></p>
</footer>

<!-- Calendar background -->
<script>
(function () {
    const cv = document.getElementById('bg-canvas');
    if (!cv) return;
    const cx = cv.getContext('2d');
    const C = 14, G = 3, S = C + G;
    const GR = ['rgba(10,18,12,0)','rgba(8,36,20,.6)','rgba(6,52,28,.65)','rgba(12,72,36,.7)','rgba(20,90,44,.75)'];
    let cols, rows, cells = [], W, H;
    function resize() {
        W = cv.width = window.innerWidth; H = cv.height = window.innerHeight;
        cols = Math.ceil(W / S) + 2; rows = Math.ceil(H / S) + 2; cells = [];
        for (let c = 0; c < cols; c++) for (let r = 0; r < rows; r++) {
            const lv = Math.random() < .35 ? 0 : Math.floor(Math.random() * 4) + 1;
            cells.push({ x: c * S, y: r * S, level: lv, op: Math.random() * .4 + .1, ph: Math.random() * Math.PI * 2, sp: .003 + Math.random() * .003 });
        }
    }
    function draw() {
        cx.clearRect(0, 0, W, H);
        cells.forEach(cell => {
            let lv = cell.level, al = cell.op;
            if (lv > 0) { cell.ph += cell.sp; al = Math.min(1, al + Math.sin(cell.ph) * .12); }
            if (lv === 0) return;
            cx.globalAlpha = al; cx.fillStyle = GR[lv]; cx.beginPath();
            if (cx.roundRect) cx.roundRect(cell.x, cell.y, C, C, 2); else cx.rect(cell.x, cell.y, C, C);
            cx.fill();
        });
        cx.globalAlpha = 1; requestAnimationFrame(draw);
    }
    resize(); draw(); window.addEventListener('resize', resize);
})();
</script>

<!-- Game of Life logic (original, unchanged) -->
<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = Math.min(window.innerWidth * 0.95, 800);
    canvas.height = canvas.width;

    const rows = 200;
    const cols = 200;
    const resolution = canvas.width / cols;
    let grid;

    function createGrid() {
        let arr = new Array(rows);
        for (let i = 0; i < rows; i++) {
            arr[i] = new Array(cols).fill(0).map(() => Math.random() > 0.5 ? 1 : 0);
        }
        return arr;
    }

    function drawGrid(grid) {
        ctx.fillStyle = '#0a1120';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        for (let i = 0; i < rows; i++) {
            for (let j = 0; j < cols; j++) {
                ctx.fillStyle = grid[i][j] ? '#39d353' : 'rgba(38,166,65,0.05)';
                ctx.fillRect(j * resolution, i * resolution, resolution - 1, resolution - 1);
            }
        }
    }

    function nextGeneration(grid) {
        const nextGrid = grid.map(arr => [...arr]);
        for (let i = 0; i < rows; i++) {
            for (let j = 0; j < cols; j++) {
                const neighbors = countLiveNeighbors(grid, i, j);
                if (grid[i][j] === 1 && (neighbors < 2 || neighbors > 3)) {
                    nextGrid[i][j] = 0;
                } else if (grid[i][j] === 0 && neighbors === 3) {
                    nextGrid[i][j] = 1;
                }
            }
        }
        return nextGrid;
    }

    function countLiveNeighbors(grid, x, y) {
        let count = 0;
        for (let i = -1; i <= 1; i++) {
            for (let j = -1; j <= 1; j++) {
                const nx = x + i, ny = y + j;
                if (i === 0 && j === 0) continue;
                if (nx >= 0 && nx < rows && ny >= 0 && ny < cols) count += grid[nx][ny];
            }
        }
        return count;
    }

    function update() {
        grid = nextGeneration(grid);
        drawGrid(grid);
        setTimeout(update, 1000);
    }

    grid = createGrid();
    drawGrid(grid);
    setTimeout(update, 1000);
</script>
</body>
</html>
